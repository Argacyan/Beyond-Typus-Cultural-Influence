namespace = cultural_influence_germanic_rework
#Second Germanic! Including a fully reworked settlement mechanic for owners of Dharma
#This a temporary file, once complete this will replace the old Germanic File

country_event = { #Hochdeutsch creation
	id = cultural_influence_germanic_rework.1
	title = hochdeutsch_standardization.title
	desc = hochdeutsch_standardization.desc
	picture = GREAT_BUILDING_eventPicture

	major = yes
	fire_only_once = yes

	trigger = {
		government_rank = 3
		culture_group = germanic
		NOT = { primary_culture = swiss } #You had your chance!
		NOT = { primary_culture = austrian } #You had your chance!
		NOT = { has_global_flag = hochdeutsch_created_flag }
		europe = { #Owned by ROOT, or not needed
			OR = {
				hochdeutsch_cultures = no
				hochdeutsch_swiss_exemption = yes
				hochdeutsch_austrian_exemption = yes
				owned_by = ROOT
			}
			type = all
		}
		has_global_flag = CI_events_enabled
	}

	immediate = {
		hidden_effect = {
			set_global_flag = hochdeutsch_created_flag
			if = {
				limit = { hochdeutsch_cultures = yes }
				change_primary_culture = hochdeutsch
			}
			else = {
				add_accepted_culture = hochdeutsch
			}
			every_owned_province = {
				limit = {
					hochdeutsch_cultures = yes
				}
				change_culture = hochdeutsch
			}
			every_province = { #Non-Austrian/Swiss owner Swiss and Austrian lands default to hochdeutsch
				limit = {
					NOT = { owned_by = ROOT }
					hochdeutsch_cultures = yes
					NOT = { owner = { primary_culture = bavarian } }
					NOT = { owner = { primary_culture = alemannish } }
				}
				change_culture = hochdeutsch
			}
			every_country = {
				limit = {
					any_owned_province = { hochdeutsch_austrian_exemption = yes }
					primary_culture = bavarian
				}
				country_event = { id = cultural_influence_germanic_rework.2 } #Austrian Splinter?
			}
			every_country = {
				limit = {
					any_owned_province = { hochdeutsch_swiss_exemption = yes }
					primary_culture = alemannish
				}
				country_event = { id = cultural_influence_germanic_rework.3 } #Swiss Splinter?
			}
		}
	}

	option = { #No Centre allowed
		name = hochdeutsch_standardization.a

		trigger = { has_global_flag = plattduutsch_created_flag }
	}

	option = { #Wien
		name= hochdeutsch_standardization.b

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			owns = 134 #Wien
		}

		134 = { #Add College to Wien
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Munich
		name = hochdeutsch_standardization.c

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			owns = 65 #München
		}

		65 = { #Add College to München
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Zürich
		name = hochdeutsch_standardization.d

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			owns = 1869 #Zürich
		}

		1869 = { #Add College to Zürich
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Nürnberg
		name = hochdeutsch_standardization.e

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			owns = 67
		}

		67 = { #Add College to Nürnberg
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}
	
	option = { #Ravensburg
		name = hochdeutsch_standardization.f

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			owns = 69 #Ravensburg
		}

		69 = { #Add College to Ravensburg
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Fallback, Capital
		name = hochdeutsch_standardization.g

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			NOT = { owns = 134 } #Wien
			NOT = { owns = 65 } #Munich
			NOT = { owns = 1869 } #Zürich
			NOT = { owns = 67 } #Nürnberg
			NOT = { owns = 69 } #Ravensburg
		}

		capital_scope = { #Add College to Capital
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}
}

country_event = { #Austrian splinter
	id = cultural_influence_germanic_rework.2
	title = austrian_splinter.title
	desc = austrian_splinter.desc
	picture = GREAT_BUILDING_eventPicture

	is_triggered_only = yes

	option = { #Austrian! not German
		name = austrian_splinter.a

		change_primary_culture = austrian
		every_province = {
			limit = {
				hochdeutsch_austrian_exemption = yes
				culture = bavarian
			}
			change_culture = austrian
		}

		ai_chance = { factor = 10 }
	}

	option = { #Austrian?
		name = austrian_splinter.b

		change_primary_culture = hochdeutsch
		every_province = {
			limit = {
				hochdeutsch_austrian_exemption = yes
				culture = bavarian
			}
			change_culture = hochdeutsch
		}
	}
}

country_event = { #Swiss splinter
	id = cultural_influence_germanic_rework.3
	title = swiss_splinter.title
	desc = swiss_splinter.desc
	picture = GREAT_BUILDING_eventPicture

	is_triggered_only = yes

	option = { #Swiss! not German
		name = swiss_splinter.a

		change_primary_culture = swiss
		every_province = {
			limit = {
				hochdeutsch_swiss_exemption = yes
				owned_by = ROOT
				culture = alemannish
			}
			change_culture = swiss
		}

		ai_chance = { factor = 10 }
	}

	option = { #Swiss?
		name = swiss_splinter.b

		change_primary_culture = hochdeutsch
		every_province = {
			limit = {
				hochdeutsch_swiss_exemption = yes
				culture = alemannish
			}
			change_culture = hochdeutsch
		}
	}
}

province_event = { #Austrian Integration
	id = cultural_influence_germanic_rework.4
	title = austrian_integration.title
	desc = austrian_integration.desc
	picture = CULTURE_eventPicture

	trigger = {
		has_global_flag = hochdeutsch_created_flag
		culture = austrian
		NOT = { owner = { primary_culture = austrian } }
		OWNER = { #Is German
			OR = {
				primary_culture = hochdeutsch
				accepted_culture = hochdeutsch
			}
			culture_group = germanic
		}
		OR = { #Lack of Hochdeutsch influence or significant transit
			development = 20 
			province_trade_power = 10
			any_neighbor_province = {
				culture = hochdeutsch
			}
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 5 #No historic resistance, just not part of Germany
		modifier = { #Rural communities reluctant to convert
			factor = 1.2
			NOT = { development = 10 }
		}
		modifier = { #More extreme rural communities
			factor = 1.5
			NOT = { development = 5 }
		}
		modifier = { #Townships more connected to capital
			factor = 0.9
			development = 10
		}
		modifier = { #Cities even more connected
			factor = 0.8
			development = 20
		}
		modifier = { #Larger city means more connection
			factor = 0.7
			development = 30
		}
		modifier = { #Stop developing pls. k thx
			factor = 0.6
			development = 40
		}
	}

	option = {
		name = austrian_integration.a

		change_culture = hochdeutsch
	}
}

province_event = { #Swiss Integration
	id = cultural_influence_germanic_rework.5
	title = swiss_integration.title
	desc = swiss_integration.desc
	picture = CULTURE_eventPicture

	trigger = {
		has_global_flag = hochdeutsch_created_flag
		culture = swiss
		NOT = { owner = { primary_culture = swiss } }
		OWNER = { #Is German
			OR = {
				primary_culture = hochdeutsch
				accepted_culture = hochdeutsch
			}
			culture_group = germanic
		}
		OR = { #Lack of Hochdeutsch influence or significant transit
			development = 20 
			province_trade_power = 10
			any_neighbor_province = {
				culture = hochdeutsch
			}
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 5 #No historic resistance, just not part of Germany
		modifier = { #Rural communities reluctant to convert
			factor = 1.2
			NOT = { development = 10 }
		}
		modifier = { #More extreme rural communities
			factor = 1.5
			NOT = { development = 5 }
		}
		modifier = { #Townships more connected to capital
			factor = 0.9
			development = 10
		}
		modifier = { #Cities even more connected
			factor = 0.8
			development = 20
		}
		modifier = { #Larger city means more connection
			factor = 0.7
			development = 30
		}
		modifier = { #Stop developing pls. k thx
			factor = 0.6
			development = 40
		}
	}

	option = {
		name = swiss_integration.a

		change_culture = hochdeutsch
	}
}

country_event = { #Plattdüütsch creation
	id = cultural_influence_germanic_rework.6
	title = plattduutsch_standardization.title
	desc = plattduutsch_standardization.desc
	picture = GREAT_BUILDING_eventPicture

	major = yes
	fire_only_once = yes

	trigger = {
		government_rank = 3
		culture_group = germanic
		NOT = { has_global_flag = plattduutsch_created_flag }
		europe = {
			OR = {
				plattduutsch_cultures = no
				plattduutsch_dutch_low_saxon_exemption = yes
				owned_by = ROOT
			}
			type = all
		}
		has_global_flag = CI_events_enabled
	}

	immediate = {
		hidden_effect = {
			set_global_flag = plattduutsch_created_flag
			if = {
				limit = { plattduutsch_cultures = yes }
				change_primary_culture = plattduutsch
			}
			else = {
				add_accepted_culture = plattduutsch
			}
			every_owned_province = {
				limit = {
					plattduutsch_cultures = yes
				}
				change_culture = plattduutsch
			}
			every_province = {
				limit = {
					NOT = { owned_by = ROOT }
					plattduutsch_dutch_low_saxon_exemption = yes
					plattduutsch_cultures = yes
				}
				change_culture = dutch_low_saxon
			}
		}
	}

	option = { #No Centre Allowed
		name = plattduutsch_standardization.a

		trigger = { has_global_flag = hochdeutsch_created_flag }
	}

	option = { #Berlin
		name= plattduutsch_standardization.b

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 50 #Berlin
		}

		50 = { #Add College to Berlin
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Königsberg (Special! Only for Prussians and allows Prussian to instantly join Plattdüütsch as well)
		name = plattduutsch_standardization.c

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 41 #Königsberg
			primary_culture = prussian
		}

		41 = { #Add College to Königsberg
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}

		every_owned_province = {
			limit = {
				plattduutsch_preussisch_cultures = yes
			}
			change_culture = plattduutsch
		}
	}

	option = { #Lübeck (Only for Non-Prussian)
		name = plattduutsch_standardization.d

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 45 #Lübeck
			NOT = { primary_culture = prussian }
		}

		45 = { #Add College to Lübeck
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Low Franconian Capital (Special! Only for Low Franconians and allows Low Franconian to instantly join Plattdüütsch as well)
		name = plattduutsch_standardization.e

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			capital_scope = { plattduutsch_low_franconian_cultures = yes }
			primary_culture = low_franconian
		}

		capital_scope = { #Add College to Capital
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}

		every_owned_province = {
			limit = {
				plattduutsch_preussisch_cultures = yes
			}
			change_culture = plattduutsch
		}
	}

	option = { #Köln  (Only for Non-low-Franconians)
		name = plattduutsch_standardization.f

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 85 #Köln
			NOT = { primary_culture = low_franconian }
		}

		85 = { #Add College to Köln
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Frankfurt
		name = plattduutsch_standardization.g

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 1876 #Frankfurt
		}

		1876 = { #Add College to Frankfurt
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Hamburg
		name = plattduutsch_standardization.h

		trigger = {
			NOT = { has_global_flag = hochdeutsch_created_flag }
			owns = 44 #Hamburg
		}

		44 = { #Add College to Hamburg
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Fallback, Capital
		name = plattduutsch_standardization.i

		trigger = {
			NOT = { has_global_flag = plattduutsch_created_flag }
			NOT = { owns = 50 } #Berlin
			NOT = { primary_culture = prussian }
			NOT = { capital_scope = { plattduutsch_low_franconian_cultures = yes } }
			NOT = { owns = 1876 } #Frankfurt
			NOT = { owns = 44 } #Hamburg
		}

		capital_scope = { #Add College to Capital
			add_building = university
			add_permanent_province_modifier = {
				name = council_for_german_orthography
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}
}

province_event = { #Dutch Low Saxon Integration
	id = cultural_influence_germanic_rework.7
	title = dutch_low_saxon_integration.title
	desc = dutch_low_saxon_integration.desc
	picture = CULTURE_eventPicture

	trigger = {
		has_global_flag = plattduutsch_created_flag
		culture = dutch_low_saxon
		NOT = { owner = { primary_culture = dutch_low_saxon } }
		OWNER = { #Is German
			OR = {
				primary_culture = plattduutsch
				accepted_culture = plattduutsch
			}
			culture_group = germanic
		}
		OR = { #Lack of Plattdüütsch influence or significant transit
			development = 20 
			province_trade_power = 10
			any_neighbor_province = {
				culture = plattduutsch
			}
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 5 #No historic resistance, just not part of Germany
		modifier = { #Rural communities reluctant to convert
			factor = 1.2
			NOT = { development = 10 }
		}
		modifier = { #More extreme rural communities
			factor = 1.5
			NOT = { development = 5 }
		}
		modifier = { #Townships more connected to capital
			factor = 0.9
			development = 10
		}
		modifier = { #Cities even more connected
			factor = 0.8
			development = 20
		}
		modifier = { #Larger city means more connection
			factor = 0.7
			development = 30
		}
		modifier = { #Stop developing pls. k thx
			factor = 0.6
			development = 40
		}
	}

	option = {
		name = dutch_low_saxon_integration.a

		change_culture = plattduutsch
	}
}

province_event = { #Low Franconian Integration (Not Dutch!)
	id = cultural_influence_germanic_rework.8
	title = low_franconian_integration.title
	desc = low_franconian_integration.desc
	picture = CULTURE_eventPicture

	trigger = {
		has_global_flag = plattduutsch_created_flag
		culture = low_franconian
		NOT = { owner = { primary_culture = low_franconian } }
		OWNER = { #Is German
			OR = {
				primary_culture = plattduutsch
				accepted_culture = plattduutsch
			}
			culture_group = germanic
		}
		OR = { #Lack of Plattdüütsch influence or significant transit
			development = 20 
			province_trade_power = 10
			any_neighbor_province = {
				culture = plattduutsch
			}
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 5 #No historic resistance, just not part of Germany
		modifier = { #Rural communities reluctant to convert
			factor = 1.2
			NOT = { development = 10 }
		}
		modifier = { #More extreme rural communities
			factor = 1.5
			NOT = { development = 5 }
		}
		modifier = { #Townships more connected to capital
			factor = 0.9
			development = 10
		}
		modifier = { #Cities even more connected
			factor = 0.8
			development = 20
		}
		modifier = { #Larger city means more connection
			factor = 0.7
			development = 30
		}
		modifier = { #Stop developing pls. k thx
			factor = 0.6
			development = 40
		}
	}

	option = {
		name = low_franconian_integration.a

		change_culture = plattduutsch
	}
}

country_event = { #Dutch Standardization (On formation of NED, then spreads)
	id = cultural_influence_germanic_rework.9
	title = dutch_standardization.title
	desc = dutch_standardization.desc
	picture GREAT_BUILDING_eventPicture

	major = yes
	fire_only_once = yes

	trigger = {
		tag = NED #Only allowed for the Dutch
		primary_culture = low_franconian
		primary_culture = dutch_low_saxon
		NOT = { has_global_flag = dutch_created_flag }
		has_global_flag = CI_events_enabled
	}

	immediate = {
		hidden_effect = {
			set_global_flag = dutch_created_flag
			change_primary_culture = dutch
			every_owned_province = {
				limit = {
					dutch_cultures = yes
				}
			}
		}
	}

	option = { #The Hague
		name = dutch_standardization.a

		4383 = { #Add Seat to Gravenhage
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Amsterdam
		name = dutch_standardization.b

		97 = { #Add Seat to Amsterdam
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Antwerp
		name = dutch_standardization.c

		1744 = { #Add Seat to Antwerp
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Brügge
		name = dutch_standardization.d

		90 = { #Add Seat to Brügge
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Brussels
		name = dutch_standardization.e

		92 = { #Add Seat to Brussels
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}

	option = { #Capital
		name = dutch_standardization.f

		capital_scope = { #Add Seat to Capital
			add_building = university
			add_permanent_province_modifier = {
				name = seat_of_dutch_language_union
				duration = -1
			}
			add_base_tax = 4
			add_base_production = 2
			add_base_manpower = 2
		}
	}
}

province_event = { #Dutch spreads (Only to low_franconian provinces, or Low Countries region)
	id = cultural_influence_germanic_rework.10
	title = dutch_spread.title
	desc = dutch_spread.desc
	picture = CULTURE_eventPicture

	trigger = {
		has_global_flag = dutch_created_flag
		OR = {
			dutch_cultures = yes
			dutch_region = yes
		}
		OWNER = { #Is Dutch
			primary_culture = dutch
		}
		OR = { #Lack of Dutch influence or significant transit
			development = 40
			province_trade_power = 10
			any_neighbor_province = {
				culture = dutch
			}
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 10

		modifier = {
			factor = 4
			NOT = { culture_group = germanic }
		}
		modifier = { #Rural communities reluctant to convert
			factor = 1.2
			NOT = { development = 10 }
		}
		modifier = { #More extreme rural communities
			factor = 1.5
			NOT = { development = 5 }
		}
		modifier = { #Townships more connected to capital
			factor = 0.9
			development = 10
		}
		modifier = { #Cities even more connected
			factor = 0.8
			development = 20
		}
		modifier = { #Larger city means more connection
			factor = 0.7
			development = 30
		}
		modifier = { #Stop developing pls. k thx
			factor = 0.6
			development = 40
		}
	}

	option = {
		name = dutch_spread.a

		change_culture = dutch
	}
}