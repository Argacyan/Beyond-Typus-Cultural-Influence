namespace = cultural_influence_steppe
#Generic Nomad events, The intent here is to make nomadic cultures and development centres more dynamic, whilst retaining the inportance of certain cities

country_event = { #Add Steppe modifiers
	id = cultural_influence_steppe.1
	title = null
	desc = null

	hidden = yes

	trigger = {
		464 = { NOT = { has_province_modifier = steppe_owned_by_nomad } } #Astrakhan
		has_global_flag = CI_events_enabled
	}

	immediate = {
		every_province = {
			limit = {
				has_terrain = steppe
			}
			add_province_triggered_modifier = steppe_owned_by_nomad
		}
		every_province = {
			limit = {
				steppe_culture_region = yes
				OWNER = { is_nomad = yes }
			}
			add_permanent_province_modifier = { 
				name = nomadic_province
				duration = -1
			}
		}
		every_province = {
			limit = {
				steppe_culture_region = no
				OWNER = { is_nomad = yes }
			}
			add_province_modifier = {
				name = non_nomadic_province
				duration = -1
			}
		}
		every_province = {
			limit = {
				steppe_culture_region = yes
				owner = { is_nomad = yes }
				development = 20
				province_has_center_of_trade_of_level = 2
			}
			remove_province_modifier = nomadic_province
			add_permanent_province_modifier = {
				name = steppe_city
				duration = -1
			}
		}
	}

	option = {
		name = null
	}
}

province_event = { #Rape and Pillage of XXX (Convert Culture & Religion)
	id = cultural_influence_steppe.2
	title = nomadic_conquest_culture_change.title
	desc = nomadic_conquest_culture_change.desc
	picture = COSSACK_ESTATE_RAIDERS_eventPicture

	trigger = {
		NOT = { culture = OWNER }
		owner = { is_nomad = yes }
		owner = { is_at_war = no }
		OR = {
			has_owner_accepted_culture = no
			owner = { ai = yes }
		}
		any_neighbor_province = {
			culture = OWNER
		}
		steppe_culture_region = yes
		owner = { manpower = 2.5 } #2500
		NOT = { has_province_modifier = steppe_city }
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 5
	}

	option = { #To the victor go the spoils!
		name = nomadic_conquest_culture_change.a

		trigger = {
			owner = { manpower = 2.5 } #2500
		}

		owner = { add_manpower = -2.5 } #2500
		if = { #Eh.. other Nomads can assimilate or whatever
			limit = {
				has_province_modifier = nomadic_province
			}
			add_base_tax = -2
			add_base_production = -2
			add_base_manpower = -1 #Manpower Biased
		}
		if = { #Non-Nomadic gets deleted
			limit = {
				NOT = { has_province_modifier = nomadic_province }
			}
			add_base_tax = -4
			add_base_production = -4
			add_base_manpower = -4
		}
		add_permanent_province_modifier = { 
			name = nomadic_province
			duration = -1
		}
		change_culture = OWNER
		change_religion = OWNER

		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOT = { owner = { manpower_percentage = 0.40 } }
			}
		}
	}

	option = { #We must exercise restraint
		name = nomadic_conquest_culture_change.b

		ai_chance = {
			factor = 10
			modifier = {
				factor = 100
				owner = { manpower_percentage = 0.75 }
			}
		}
	}
}

country_event = { #Nomadic growth (Manpower for dev)
	id = cultural_influence_steppe.3
	title = nomadic_growth.title
	desc = nomadic_growth.desc
	picture = HORDE_ON_HORSEBACK_eventPicture

	trigger = {
		is_nomad = yes
		manpower = 1 #1000
		NOT = { devastation = 1 }
		has_global_flag = CI_events_enabled
		any_owned_province = { #Any province valid for growth below 20 dev
			OR = {
				AND = {
					has_owner_accepted_culture = yes
					owner = { ai = no }
				}
				has_owner_culture = yes
			}
			steppe_culture_region = yes
			has_province_modifier = nomadic_province #Nomadic Ruthenians are fake news
			NOT = { has_province_modifier = steppe_city } #Maybe redundant
			NOT = { development = 20 }
		}
	}

	mean_time_to_happen = {
		years = 15

		modifier = {
			factor = 2
			NOT = { manpower = 5 } #5000
		}
		modifier = {
			factor = 0.8
			manpower = 12.5 #12500
		}
		modifier = {
			factor = 0.8
			manpower = 20 #20000
		}
		modifier = {
			factor = 0.8
			manpower = 30 #30000
		}
		modifier = {
			factor = 0.1
			manpower_percentage = 0.90 #90%
		}
	}

	option = { #Land grants for Mingghan (1000 manpower for 2 dev)
		name = nomadic_growth.a

		trigger = {
			manpower = 1 #1000
		}

		add_manpower = -1 #1000

		steppe_gain_random_dev = yes #2
		steppe_gain_random_dev = yes

		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.40 }
			}
		}
	}

	option = { #Land grants for Tumen (10000 manpower for 25 dev)
		name = nomadic_growth.b

		trigger = {
			manpower = 10 #10000
		}

		add_manpower = -10 #10000

		steppe_gain_random_dev = yes #25
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes
		steppe_gain_random_dev = yes

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { manpower_percentage = 0.60 }
			}
		}
	}

	option = { #We need the men
		name = nomadic_growth.d

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				manpower_percentage = 0.75
			}
		}
	}
}

province_event = { #Rise of Steppe City
	id = cultural_influence_steppe.4
	title = rise_of_steppe_city.title
	desc = rise_of_steppe_city.desc
	picture = BURGHER_ESTATE_eventPicture

	trigger = {
		steppe_culture_region = yes
		NOT = { has_province_modifier = steppe_city }
		owner = { is_nomad = yes }
		has_province_modifier = nomadic_province
		development = 20
		NOT = { devastation = 1 }
		province_has_center_of_trade_of_level = 2
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 20

		modifier = {
			factor = 0.8
			province_has_center_of_trade_of_level = 3
		}
		modifier = {
			factor = 0.8
			development = 25
		}
		modifier = {
			factor = 0.6
			development = 30
		}
	}

	option = {
		name = rise_of_steppe_city.a

		remove_province_modifier = nomadic_province
		add_permanent_province_modifier = { 
			name = steppe_city
			duration = -1  
		}
		add_base_tax = 2
		add_base_production = 2
		add_base_manpower = 2
	}
}

province_event = { #Decline of Steppe City
	id = cultural_influence_steppe.5
	title = decline_of_steppe_city.title
	desc = decline_of_steppe_city.desc
	picture = MERCHANTS_ARGUING_eventPicture

	trigger = {
		has_province_modifier = steppe_city
		OR = { #Crappy trade, Crappy dev, or no longer nomadic
			AND = {
				province_has_center_of_trade_of_level = 1
				NOT = { province_has_center_of_trade_of_level = 2 }
			}
			NOT = { development = 20 }
			owner = { is_nomad = no }
		}
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.6
			NOT = { development = 20 }
		}
	}

	option = {
		name = decline_of_steppe_city.a

		remove_province_modifier = steppe_city
		add_permanent_province_modifier = { 
			name = nomadic_province
			duration = -1
		}
		add_base_tax = -2
		add_base_production = -2
		add_base_manpower = -2
	}
}

province_event = { #Nomads flee
	id = cultural_influence_steppe.6
	title = nomads_flee.title
	desc = nomads_flee.desc
	picture = HORDE_ON_HORSEBACK_eventPicture

	trigger = {
		has_province_modifier = nomadic_province
		owner = { is_nomad = no }
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 2
	}

	option = {
		name = nomads_flee.a

		remove_province_modifier = nomadic_province
		add_base_tax = -4
		add_base_production = -4
		add_base_manpower = -4
	}
}

country_event = { #Settlement of capital region (Basically for Uzbek)
	id = cultural_influence_steppe.7
	title = nomadic_capital_settlements.title
	desc = nomadic_capital_settlements.desc
	picture = HORDE_ON_HORSEBACK_eventPicture

	trigger = {
		manpower = 10 #10000
		is_nomad = yes
		capital_scope = { has_owner_culture = yes }
		capital_scope = { steppe_culture_region = yes }
		has_global_flag = CI_events_enabled
	}

	mean_time_to_happen = {
		years = 20
	}

	option = { #Go Ahead
		name = nomadic_capital_settlements.a

		trigger = {
			manpower = 10 #10000
		}

		add_manpower = -10 #10000
		capital_scope = { change_culture = ROOT }
		capital_scope = { change_religion = ROOT }
		add_base_tax = 2
		add_base_production = 2
		add_base_manpower = 2

		ai_chance = {
			factor = 1000
		}
	}

	option = { #Nah
		name = nomadic_capital_settlements.b
	}
}

province_event = { #Dispersion of nomads (Dev moves away from over-centralization)
	id = cultural_influence_steppe.8
	title = nomadic_over_centralization.title
	desc = nomadic_over_centralization.desc
	picture = HORDE_ON_HORSEBACK_eventPicture

	trigger = {
		owner = { is_nomad = yes }
		has_province_modifier = nomadic_province
		development = 20
	}

	mean_time_to_happen = {
		years = 20

		modifier = {
			factor = 0.8
			development = 25
		}
		modifier = {
			factor = 0.6
			development = 30
		}
		modifier = {
			factor = 0.4
			development = 35
		}
	}

	option = {
		name = nomadic_over_centralization.a

		add_base_tax = -1
		add_base_production = -1
		add_base_manpower = -1

		random_owned_province = {
			limit = {
				steppe_culture_region = yes
			}
			add_base_tax = 1
		}
		random_owned_province = {
			limit = {
				steppe_culture_region = yes
			}
			add_base_production = 1
		}
		random_owned_province = {
			limit = {
				steppe_culture_region = yes
			}
			add_base_manpower = 1
		}
	}
}

province_event = { #Non-Nomadic land owned by nomad
	id = cultural_influence_steppe.9
	title = non_nomadic_land_event.title
	desc = non_nomadic_land_event.desc
	picture = SIEGE_eventPicture

	trigger = {
		NOT = { has_province_modifier = non_nomadic_province }
		owner = { is_nomad = yes }
		steppe_culture_region = no
	}

	mean_time_to_happen = {
		years = 5
	}

	option = {
		name = non_nomadic_land_event.a

		add_province_modifier = {
			name = non_nomadic_province
			duration = -1
		}
	}
}